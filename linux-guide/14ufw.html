<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>系统安全/防火墙/杀毒</title><link rel="stylesheet" href="../_static/css/theme-ycp.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/s4defs-roles.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/underline.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/avatarp.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="在  中搜索"
          href="../_static/opensearch.xml"/>
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="录音" href="10audiorecorder.html" />
    <link rel="prev" title="Xfce环境中对应的windows功能" href="13xfce.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            驿窗项目
              <img src="../_static/avatarp.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                开源/Linux大众化，从驿窗开始
              </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ffmpeg/ffmpeg.html">FFmpeg应用参考</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gimp/gimp.html">GIMP操作指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inkscape/inkscape.html">Inkscape操作指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ycp_gd_base/ycp_base.html">驿窗平面基础</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libreoffice/libreoffice.html">LibreOffice操作指南</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="0linux-guide.html">Linux入门指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rime/rime.html">Rime开源输入法</a></li>
<li class="toctree-l1"><a class="reference internal" href="../onehand/onehand.html">单手笔顺输入法</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scribus/scribus.html">Scribus操作指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shotcut/shotcut.html">Shotcut操作指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright-reg/copyright.html">版权登记操作指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trademark-reg/trademark.html">商标注册操作指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ycpview/ycpview.html">驿窗研究报告</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license/license-ycp.html">开源公约数字条款</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aboutycp/aboutycp.html">关于驿窗项目</a></li>
<li class="toctree-l1"><a class="reference internal" href="../update/log.html">更新日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license/license.html">版权声明(驿窗311条款)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../donate/donate.html">捐助</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">驿窗项目</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="0linux-guide.html">Linux入门指南</a></li>
      <li class="breadcrumb-item active">系统安全/防火墙/杀毒</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="顺序式页面导航">
        <a href="13xfce.html" class="btn btn-neutral float-left" title="Xfce环境中对应的windows功能" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="10audiorecorder.html" class="btn btn-neutral float-right" title="录音" accesskey="n">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="ufw">
<span id="id1"></span><h1>系统安全/防火墙/杀毒<a class="headerlink" href="#ufw" title="永久链接至标题"></a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="id2">
<h2>1. 系统安全<a class="headerlink" href="#id2" title="永久链接至标题"></a></h2>
<p>对于电脑操作系统来说，可能性最高的安全威胁应该是浏览器，换句话说，浏览器的漏洞是目前大家电脑上最大的系统安全威胁来源。</p>
<p>解决这个问题有两个方向，一是沙箱运行浏览器，比如firejail；另一个是虚拟机运行浏览器。二者都能实现安全隔离的功能。基于整体上的考量，驿窗建议大家使用虚拟机，具体请参考下面的对比说明：</p>
<dl class="simple">
<dt>虚拟机与沙箱区别：</dt><dd><ol class="arabic simple">
<li><p>有些应用无法在沙箱中运行，但虚拟机没有这个问题。可以把虚拟机看作是一个完整的操作系统，而沙箱只是系统中的一个应用。</p></li>
<li><p>整体上，沙箱比虚拟机轻量，更小更快更简单。</p></li>
<li><p>沙箱虽然更轻量，但Linux可以从内核支持虚拟机(kvm)，所以，虚拟机速度并不慢。</p></li>
<li><p>虚拟机比沙箱更安全，可以实现是大化的安全隔离。这一点，沙箱没有优势。</p></li>
<li><p>使用Linux系统很难避开虚拟机的使用，比如偶尔运行只有windows系统才有的程序，就需要使用windows虚拟机。所以，可以把虚拟机看作是Linux必备技能。</p></li>
<li><p>在虚拟机中进行测试，比如安装一些陌生的应用软件，不会对主机系统造成任何损坏。</p></li>
<li><p>虚拟机与防火墙简单配合可以极大强化本机系统的安全。</p></li>
</ol>
</dd>
</dl>
<p>基于上述原因，驿窗推荐使用虚拟机，并把平时的网页浏览放到虚拟机中进行，最大限度的防范浏览器漏洞风险。</p>
<blockquote>
<div><div class="admonition-y admonition">
<p class="admonition-title"><a class="reference internal" href="../_images/avatarp14.svg"><img alt="Y" class="align-middle" height="22" src="../_images/avatarp14.svg" width="22" /></a> 驿窗注：<strong>虚拟机逃逸</strong></p>
<p>虚拟机逃逸是能够做到从虚拟机中对主机系统进行攻击的。不过，虚拟机逃逸的难度级别非常高，对于常规的家用和办公目的来说，可以忽略不计。</p>
</div>
</div></blockquote>
<p>关于虚拟机与防火墙的配合，请参考<a class="reference internal" href="16kvm.html#kvm"><span class="std std-ref">虚拟机virt-manager</span></a>。</p>
</div>
<div class="section" id="id3">
<h2>2. 防火墙<a class="headerlink" href="#id3" title="永久链接至标题"></a></h2>
<p>Linux系统安装安装一款非常简单好用的防火墙ufw。ufw全称是Uncomplicated Firewall，本质上它并不是防火墙，而是防火墙的配置工具，而核心的防火墙是Linux内核自带的，名字叫Netfilter，通过ufw进行配置。ufw通过对Netfilter进行配置，来实现需要的安全规则。</p>
<p>对于个人用户来说，ufw完全够用；但如果是用于服务器，那么ufw可能并不适合，需要更灵活和更强大的工具。</p>
<div class="section" id="id4">
<h3>防火墙安装<a class="headerlink" href="#id4" title="永久链接至标题"></a></h3>
<p>对于个人电脑来说，只需要安装两个软件包：</p>
<ol class="arabic">
<li><p>ufw</p></li>
<li><p>gufw</p>
<blockquote>
<div><div class="admonition-y admonition">
<p class="admonition-title"><a class="reference internal" href="../_images/avatarp14.svg"><img alt="Y" class="align-middle" height="22" src="../_images/avatarp14.svg" width="22" /></a> 驿窗注：</p>
<p>可以在终端中输入下面这条命令来快速安装ufw和gufw：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install ufw gufw
</pre></div>
</div>
</div>
</div></blockquote>
</li>
</ol>
<p>上面我们安装了两个安装包ufw和gufw，其中gufw只是一个UI界面，专门用于ufw；如果没有gufw，那么我们就只能通过命令来配置防火墙。</p>
</div>
<div class="section" id="id5">
<h3>防火墙启用<a class="headerlink" href="#id5" title="永久链接至标题"></a></h3>
<p>防火墙安装好以后，默认是不启用的。如果想启用防火墙，可以打开<strong>防火墙配置</strong>，按下图设置：</p>
<blockquote>
<div><ul class="simple">
<li><p>配置文件：家庭(主页)</p></li>
<li><p>状态：激活</p></li>
<li><p>传入：否认</p></li>
<li><p>传出：允许</p></li>
</ul>
<div class="figure align-center" id="id10">
<img alt="../_images/14ufw1.png" src="../_images/14ufw1.png" />
<p class="caption"><span class="caption-text">防火墙启用后的状态</span><a class="headerlink" href="#id10" title="永久链接至图片"></a></p>
</div>
</div></blockquote>
</div>
<div class="section" id="id6">
<h3>防火墙配置<a class="headerlink" href="#id6" title="永久链接至标题"></a></h3>
<p>安装好以后，会在系统应用程序中多出一个 防火墙 图标，双击这个图标就可以配置防火墙。防火墙需要管理员权限才可以进行配置：</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>初级配置：这是最简单的配置方法，即上面的防火墙启用所涉及的四项设置。此配置非常简单，适用于所有个人电脑。</p></li>
<li><p>高级配置：可以制定一些稍微复杂的安全规则。如果您希望对自己的电脑进行维护，建议对此方式进行适当了解。</p></li>
</ol>
</div></blockquote>
<p>通常情况下，你只需要使用“初级配置”就可以保证系统安全。</p>
<p>“高级配置”能够实现的安全等级大概有两个：</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>开放53、80、443这三个端口，其它端口全部封死，平时可以用浏览器上网。(安全等级：高级)</p></li>
<li><p>只开放53这一个端口，其它端口全部封死，然后配合虚拟机，实现个人电脑的极限安全策略。此方式主机浏览器无法上网，只能浏览本地文件，上网需要使用虚拟机。(安全等级：极限)</p></li>
</ol>
</div></blockquote>
<p>极限的安全策略的目的是为个人电脑带来最高等级的安全环境，但会带来一些小问题，详细说明请参考<a class="reference internal" href="16kvm.html#kvm-safe-super-problem"><span class="std std-ref">极限安全策略的问题</span></a>。</p>
<dl>
<dt>高级配置方法1：</dt><dd><ol class="arabic simple">
<li><p>基本设置：</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>配置文件：家庭(主页)</p></li>
<li><p>状态：激活</p></li>
<li><p>传入：否认</p></li>
<li><p>传出：否认</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>开放53、80、443这三个端口的出：</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>基本设置完成后，主机的浏览器应该已经无法上网。点击Rules按钮，下面会切换到规则界面：</p></li>
</ol>
<blockquote>
<div><div class="figure align-center" id="id11">
<img alt="../_images/14ufw2.png" src="../_images/14ufw2.png" />
<p class="caption"><span class="caption-text">点击 Rules 切换到规则界面</span><a class="headerlink" href="#id11" title="永久链接至图片"></a></p>
</div>
</div></blockquote>
<ol class="loweralpha simple" start="2">
<li><p>点击上图中左下角的加号按钮，打开“添加一个防火墙规则”对话框：</p></li>
</ol>
<blockquote>
<div><div class="figure align-center" id="id12">
<img alt="../_images/14ufw3.png" src="../_images/14ufw3.png" />
<p class="caption"><span class="caption-text">添加一个防火墙规则 对话框</span><a class="headerlink" href="#id12" title="永久链接至图片"></a></p>
</div>
</div></blockquote>
<ol class="loweralpha simple" start="3">
<li><p>点击上图中的“高级”选项卡，切换到高级配置界面：</p></li>
</ol>
<blockquote>
<div><div class="figure align-center" id="id13">
<img alt="../_images/14ufw4.png" src="../_images/14ufw4.png" />
<p class="caption"><span class="caption-text">高级 选项卡</span><a class="headerlink" href="#id13" title="永久链接至图片"></a></p>
</div>
</div></blockquote>
<ol class="loweralpha simple" start="4">
<li><p>设置53端口规则：</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>名称：53</p></li>
<li><p>政策：允许</p></li>
<li><p>方向：出来</p></li>
<li><p>接口：如果您使用有线网络，请选择有线网卡；如果使用无线网络，请选择无线网卡</p></li>
<li><p>至：右侧的方框内填写53</p></li>
</ul>
<p>其它内容保持不变，然后点击右下角的“添加”按钮，如下图所示：</p>
<div class="figure align-center" id="id14">
<img alt="../_images/14ufw5.png" src="../_images/14ufw5.png" />
<p class="caption"><span class="caption-text">53端口规则</span><a class="headerlink" href="#id14" title="永久链接至图片"></a></p>
</div>
</div></blockquote>
<ol class="loweralpha simple" start="5">
<li><p>按同样的流程(a-d)添加80端口规则，如下图所示：</p></li>
</ol>
<blockquote>
<div><div class="figure align-center" id="id15">
<img alt="../_images/14ufw6.png" src="../_images/14ufw6.png" />
<p class="caption"><span class="caption-text">80端口规则</span><a class="headerlink" href="#id15" title="永久链接至图片"></a></p>
</div>
</div></blockquote>
<ol class="loweralpha simple" start="6">
<li><p>按同样的流程(a-d)添加443端口规则，如下图所示：</p></li>
</ol>
<blockquote>
<div><div class="figure align-center" id="id16">
<img alt="../_images/14ufw7.png" src="../_images/14ufw7.png" />
<p class="caption"><span class="caption-text">443端口规则</span><a class="headerlink" href="#id16" title="永久链接至图片"></a></p>
</div>
</div></blockquote>
<ol class="loweralpha simple" start="7">
<li><p>最终完成以后，在Rules框中增加了6条红色的新规则，如下图所示：</p></li>
</ol>
<blockquote>
<div><div class="figure align-center" id="id17">
<img alt="../_images/14ufw8.png" src="../_images/14ufw8.png" />
<p class="caption"><span class="caption-text">高级配置完成</span><a class="headerlink" href="#id17" title="永久链接至图片"></a></p>
</div>
</div></blockquote>
</div></blockquote>
</dd>
<dt>高级配置方法2：</dt><dd><p>配合虚拟机使用，即传入和传出都为 否认，然后在Rules里添加一个规则，只开放53端口传出(允许虚拟机连接网络)。如果本机系统需要安装软件或者升级等连接网络的操作，就临时开放一下443端口出，网络操作完成后马上关闭443端口。</p>
</dd>
</dl>
</div>
<div class="section" id="id7">
<h3>防火墙状态<a class="headerlink" href="#id7" title="永久链接至标题"></a></h3>
<p>防火墙的状态如果是未激活，表示系统的防火墙没有启用，等同于电脑没有防火墙。如果是激活，就表示系统启用了防火墙。</p>
<p>启用了防火墙之后，并不表示系统就安全，因为 启用 仅代表防火墙程序开始工作，但具体的工作内容还需要进一步设置，最简单的设置就是上面提到的 初级配置。</p>
<p>打开gufw进行配置时会看到传入、传出、允许、否认之类的功能，其中：</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>传出：</p></li>
<li><p>传入：</p></li>
<li><p>允许：</p></li>
<li><p>否认：</p></li>
<li><p>拒绝：</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="id8">
<h3>防火墙规则<a class="headerlink" href="#id8" title="永久链接至标题"></a></h3>
<p>打开gufw进行配置时会注意到下面有一个Rules，点击这里，可以看到已经添加的防火墙规则，默认情况下没有任何规则。</p>
<p>所谓的规则，其实就是指定某一个端口，然后确认端口是否放行，放行的方向是传出还是传入。</p>
<p>这一点与windows系统的防火墙有时候不太一样。windows系统中防火墙很多时候是对某一个应用程序进行设置，而不是对端口进行设置，但原理是相同的。windows中对应用进行设置，其实就是对应用所使用的端口进行设置。Linux中对端口进行设置，其实是已经知道了某个应用会使用某个端口，端口一封，应用就无法连接网络。</p>
<p>所以，Linux系统如果想更深入地对防火墙进行设置，需要学会如何查看应用程序所使用的端口。</p>
</div>
</div>
<div class="section" id="id9">
<h2>3. 杀毒软件<a class="headerlink" href="#id9" title="永久链接至标题"></a></h2>
<p>Debian可以安装一个很有名的开源杀毒软件叫clamav，这是一个命令行方式的杀毒软件；如果想使用图形界面，可以再安装一个包叫clamtk，它是专门用于clamav的图形界面组件。</p>
<p>实际上，按clamav的说法，clamav的病毒库95%是用于查杀windows病毒的，这说明Linux系统病毒种类是远少于windows的。事实是，使用windows系统的时候，大家对杀毒软件/防火墙通常都比较熟悉，也会安装和配置使用；而一旦使用了Linux系统以后，慢慢地就变成不太会使用杀毒软件和防火墙了，因为基本用不到，也就不熟悉。这与Linux系统的特性有关。</p>
<p>驿窗测试了一段时间clamav，Debian系统从来没杀出过病毒，倒是很久以前使用windows时的一个数据备份目录，杀出一种病毒。再之后，就基本没怎么用过了。</p>
<p>另外，目前杀病毒软件用处并不是特别大，因为当前安全威胁主要是来自于系统漏洞和网页浏览器，所以，把精力放到漏洞和浏览器上，设计相关的方案，比杀毒软件更让人放心。</p>
<p>驿窗提供的方案是封住本机所有端口，仅开放53的出权限，然后本机使用virt-manager虚拟机上网，比如上网看网页、看网络视频、发邮件等等。这个方案的特点就是把平时上网的操作全部放在虚拟机中，主机从来不上网，仅更新系统和安装软件。这个方案安全性极高，且漏洞也基本上不需要担心。虚拟机里中毒或者被攻入没关系，因为想从虚拟机进入主机，不是一般的难，普通用户可以理解为做不到，因为很多病毒测试都是在虚拟机里进行的，可见虚拟机是可以在极大程度上隔离主机与网络之间的安全问题的。结合virt-manager虚拟机的快照功能，随时可以一秒钟内就把系统重置到指定的状态。</p>
<p><em>未完稿……</em></p>
<p><em>最近一次更新：2024-01-19</em></p>
<hr class="docutils" />
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="13xfce.html" class="btn btn-neutral float-left" title="Xfce环境中对应的windows功能" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="10audiorecorder.html" class="btn btn-neutral float-right" title="录音" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 : 驿窗.</p>
  </div>

  
<p style="color: gray;">除额外注明的地方外，本文档由<strong>驿窗</strong>原创，并根据开源协议-<a href="https://ycproject.cn/license/license.html" style="text-decoration: underline;">驿窗311条款</a>发布。
<br>所有内容仅供参考，不提供任何担保。需求或疑问请联系：classenu@163.com</p>
 


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>